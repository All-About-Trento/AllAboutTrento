import{r as n,o as W,l as c,w as q,a as u,c as r,u as a,b as s,v as m,d as e,e as x,f as b,t as v,g as _,F as B,h as G,i as J}from"./index-f510e6e2.js";import{f as Q,c as X,p as Y,d as Z}from"./poi-a21dba36.js";const ee={key:0},oe={key:0},te=e("span",null,"Insert a new poi",-1),ne=e("br",null,null,-1),le=e("option",{disabled:"",value:""},"Seleziona una Tipologia",-1),ie=e("option",null,"Monumentario",-1),ae=e("option",null,"Artistico",-1),se=e("option",null,"Culinario",-1),ue=[le,ie,ae,se],re=e("option",{disabled:"",value:""},"Aperto o Chiuso",-1),de=e("option",null,"Aperto",-1),ce=e("option",null,"Chiuso",-1),ve=[re,de,ce],pe=e("br",null,null,-1),me={style:{color:"red"}},_e=e("h1",null,"Poi:",-1),fe=["onClick"],ge={key:0},he={key:1},ke=["onClick"],ye={style:{color:"red"}},ze=["onClick"],Pe=e("br",null,null,-1),Ve={style:{color:"red"}},be={key:1},Se=["src"],$e=e("br",null,null,-1),Ue=["href"],we={__name:"PoiTable",setup(N){const S={}.VITE_API_HOST||"http://localhost:8080",T=S+"/reviews",f=n(""),P=n(""),g=n(""),h=n(""),V=n(""),k=n(""),y=n(""),$=n(""),U=n(""),z=n(""),l=n(""),I=n(""),A=n(""),D=n("");let E=!1,w=!1,C=!1,d=n(""),M=n("");W(()=>{c.token=$cookies.isKey("email"),c.nome=$cookies.get("nome"),c.email=$cookies.get("email"),c.id=$cookies.get("id"),C=$cookies.isKey("poiSelezionato"),d=$cookies.get("poiSelezionato"),$cookies.get("ruolo")=="gestore"?w=!0:$cookies.get("ruolo")=="utente"&&(E=!0),console.log(d),Q()}),q(c,(i,o)=>{l.value=""});function O(){if(f.value==""||P.value==""||g.value==""||h.value==""||V.value==""||k.value==""||y.value==""){l.value="Compila tutti i campi";return}if(typeof f.value!="string"){l.value="Nome non è in formato stringa";return}if(typeof g.value!="string"){l.value="Descrizione non è in formato stringa";return}if(typeof h.value!="string"){l.value="Posizione non è in formato stringa";return}if(typeof k.value!="string"){l.value="Orari Apertura non è in formato stringa";return}if(typeof y.value!="string"){l.value="Immagine non è in formato stringa";return}l.value="",X(f.value,P.value,g.value,h.value,V.value,k.value,y.value).catch(i=>console.error(i))}function L(i){Z(i).catch(o=>console.error(o)),D.value="Delete Poi effettuata"}function R(i){if(console.log(i),console.log(c.id),!c.token){l.value="Please login to review a Poi!";return}if(z.value<1||z.value>5){I.value="Valore tra 1 e 5!!";return}l.value="",fetch(T,{method:"POST",headers:{"Content-Type":"application/json","x-access-token":c.token},body:JSON.stringify({titolo:$.value,descrizione:U.value,valutazione:z.value,utente:c.id,poi:i.self})}).then(o=>{location.reload()}).catch(o=>console.error(o))}async function j(i){M.value=await(await fetch(S+"/"+i.self)).json(),$cookies.set("poiSelezionato",M.value,86400),location.reload()}function F(){$cookies.remove("poiSelezionato"),$cookies.remove("poiSelezionato2"),location.reload()}function H(){return d.immagine}function K(){return d.posizione}return(i,o)=>(u(),r(B,null,[a(C)?_("",!0):(u(),r("div",ee,[a(w)?(u(),r("form",oe,[te,ne,s(e("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>f.value=t),placeholder:"nome"},null,512),[[m,f.value,void 0,{string:!0}]]),s(e("select",{"onUpdate:modelValue":o[1]||(o[1]=t=>P.value=t)},ue,512),[[x,P.value]]),s(e("input",{"onUpdate:modelValue":o[2]||(o[2]=t=>g.value=t),placeholder:"descrizione"},null,512),[[m,g.value]]),s(e("input",{"onUpdate:modelValue":o[3]||(o[3]=t=>h.value=t),placeholder:"posizione"},null,512),[[m,h.value]]),s(e("select",{"onUpdate:modelValue":o[4]||(o[4]=t=>V.value=t)},ve,512),[[x,V.value]]),s(e("input",{"onUpdate:modelValue":o[5]||(o[5]=t=>k.value=t),placeholder:"orari_apertura"},null,512),[[m,k.value]]),s(e("input",{"onUpdate:modelValue":o[6]||(o[6]=t=>y.value=t),placeholder:"immagine"},null,512),[[m,y.value]]),b("  "),e("button",{type:"button",onClick:O},"Inserisci nuovo Poi "),pe,e("span",me,v(l.value),1)])):_("",!0),_e,e("ul",null,[(u(!0),r(B,null,G(a(Y).value,t=>(u(),r("li",{key:t.self},[e("button",{onClick:p=>j(t)},v(t.nome,t.descrizione),9,fe),i.ruolo?(u(),r("a",ge," ")):_("",!0),a(E)?(u(),r("div",he,[s(e("input",{"onUpdate:modelValue":o[7]||(o[7]=p=>$.value=p),placeholder:"titolo"},null,512),[[m,$.value]]),s(e("input",{"onUpdate:modelValue":o[8]||(o[8]=p=>U.value=p),placeholder:"descrizione"},null,512),[[m,U.value]]),s(e("input",{"onUpdate:modelValue":o[9]||(o[9]=p=>z.value=p),type:"number",placeholder:"valutazione",min:"1",max:"5"},null,512),[[m,z.value]]),b("   "),e("button",{onClick:p=>R(t)},"REVIEW",8,ke)])):_("",!0),e("span",ye,v(I.value),1),b("   "),a(w)?(u(),r("button",{key:2,onClick:p=>L(t)},"DELETE",8,ze)):_("",!0),Pe,e("span",Ve,v(A.value),1)]))),128))])])),a(C)?(u(),r("div",be,[e("h1",null,v(a(d).nome)+" : "+v(a(d).tipologia),1),e("h2",null,v(a(d).descrizione),1),e("img",{src:H(),height:"700",width:"1200"},null,8,Se),b(),$e,e("a",{href:K(),target:"_blank"},"Premi qui per la posizione",8,Ue),e("h1",null,v(a(d).stato),1),e("h1",null,v(a(d).orari_apertura),1),e("button",{onClick:o[10]||(o[10]=t=>F())}," Torna Indietro")])):_("",!0)],64))}},Ie={__name:"PoiView",setup(N){return(S,T)=>(u(),r("div",null,[J(we)]))}};export{Ie as default};
