import{r as s,o as g,l as t,w as P,a as v,c as m,d as e,t as a,b as _,v as p,f as k,i as b}from"./index-40ca6956.js";const y={class:"profilo"},T=e("br",null,null,-1),U=e("h2",null,"Cambio Password",-1),V=e("br",null,null,-1),x={style:{color:"red"}},S={__name:"Profile",setup(f){const c={}.VITE_API_HOST||"http://localhost:8080";s(""),s(""),s(""),s("");const u=s(""),d=s(""),i=s(""),l=s([]);g(()=>{t.token=$cookies.isKey("email"),t.nome=$cookies.get("nome"),t.email=$cookies.get("email"),t.id=$cookies.get("id"),h()}),P(t,(n,o)=>{i.value=""});async function h(){const n=c+"/utentis/"+t.id;l.value=await(await fetch(n)).json()}function w(n){fetch(c+"/utentis/"+n,{method:"PUT",headers:{"Content-Type":"application/json","x-access-token":t.token},body:JSON.stringify({oPassword:u.value,nPassword:d.value})}).then(o=>{if(o.status==204){i.value="Vecchia Password Sbagliata";return}else{i.value="",location.reload();return}}).catch(o=>console.error(o))}return(n,o)=>(v(),m("div",y,[e("h1",null,"Profilo "+a(l.value.id),1),e("h3",null,a(l.value.nome)+" "+a(l.value.cognome),1),e("h3",null,"Email: "+a(l.value.email),1),e("p",null,"Numero Telefono : "+a(l.value.numTelefono),1),e("p",null,"Password : "+a(l.value.password),1),e("p",null,"Ruolo: "+a(l.value.ruolo),1),T,U,_(e("input",{"onUpdate:modelValue":o[0]||(o[0]=r=>u.value=r),placeholder:"vecchia password"},null,512),[[p,u.value]]),_(e("input",{"onUpdate:modelValue":o[1]||(o[1]=r=>d.value=r),placeholder:"nuova password"},null,512),[[p,d.value]]),e("button",{onClick:o[2]||(o[2]=r=>w(l.value.id))},"Cambia"),k(),V,e("span",x,a(i.value),1)]))}},N={__name:"ProfileView",setup(f){return(c,u)=>(v(),m("div",null,[b(S)]))}};export{N as default};
