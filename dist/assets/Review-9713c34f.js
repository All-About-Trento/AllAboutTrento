import{r as k,o as g,l as e,w,a as n,c as s,u as i,t as c,g as p,d as o,F as m,h as y,i as E}from"./index-f510e6e2.js";import{f as h,p as T}from"./poi-a21dba36.js";const $={key:0},x={key:1,style:{color:"red"}},z={class:"reviewDiv"},D=["onClick"],R={__name:"ReviewTable",setup(f){const r={}.VITE_API_HOST||"http://localhost:8080",l=k([]);g(()=>{e.token=$cookies.isKey("email"),e.email=$cookies.get("email"),e.nome=$cookies.get("nome"),e.id=$cookies.get("id"),u(),h()}),w(e,(t,_)=>{h(),u()});async function u(){if(!e.token){l.value=[];return}const t=r+"/reviews/"+e.id;console.log(t),l.value=await(await fetch(t)).json()}async function v(t){fetch(r+"/"+t.self,{method:"DELETE",headers:{"Content-Type":"application/json","x-access-token":e.token}}).then(()=>{u()}).catch(_=>console.error(_))}return(t,_)=>(n(),s(m,null,[i(e).token?(n(),s("span",$," Queste sono le tue reviews , "+c(i(e).nome)+": ",1)):p("",!0),i(e).token?p("",!0):(n(),s("span",x,"Esegui il login per visualizzare le tue reviews! ")),o("ul",null,[(n(!0),s(m,null,y(l.value,a=>(n(),s("li",{key:a.self},[o("div",z,[o("p",null,c((i(T).value.find(d=>d.self==a.poi)||{nome:"unknown"}).nome),1),o("a",null,c(a.descrizione)+"  ",1),o("a",null,"Valutazione : "+c(a.valutazione)+"  ",1),o("button",{onClick:d=>v(a)},"DELETE",8,D)])]))),128))])],64))}};const V=o("h1",null,"Reviews:",-1),B={__name:"Review",setup(f){return(r,l)=>(n(),s("div",null,[V,E(R)]))}};export{B as default};
