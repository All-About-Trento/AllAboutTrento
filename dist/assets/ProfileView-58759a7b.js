import{r as t,o as g,l,w as P,a as v,c as m,d as e,t as a,b as _,v as p,f as k,i as b}from"./index-ed27a317.js";const y={class:"profilo"},T=e("h1",null,"Profilo",-1),U=e("br",null,null,-1),V=e("h2",null,"Cambio Password",-1),x=e("br",null,null,-1),S={style:{color:"red"}},$={__name:"Profile",setup(h){const c={}.VITE_API_HOST||"http://localhost:8080";t(""),t(""),t(""),t("");const u=t(""),d=t(""),i=t(""),s=t([]);g(()=>{l.token=$cookies.isKey("email"),l.nome=$cookies.get("nome"),l.email=$cookies.get("email"),l.id=$cookies.get("id"),f()}),P(l,(n,o)=>{i.value=""});async function f(){const n=c+"/utentis/"+l.id;s.value=await(await fetch(n)).json()}function w(n){fetch(c+"/utentis/"+n,{method:"PUT",headers:{"Content-Type":"application/json","x-access-token":l.token},body:JSON.stringify({oPassword:u.value,nPassword:d.value})}).then(o=>{if(o.status==204){i.value="Vecchia Password Sbagliata";return}else{i.value="",location.reload();return}}).catch(o=>console.error(o))}return(n,o)=>(v(),m("div",y,[T,e("h3",null,a(s.value.nome)+" "+a(s.value.cognome),1),e("h3",null,"Email: "+a(s.value.email),1),e("p",null,"Numero Telefono : "+a(s.value.numTelefono),1),e("p",null,"Password : "+a(s.value.password),1),e("p",null,"Ruolo: "+a(s.value.ruolo),1),U,V,_(e("input",{"onUpdate:modelValue":o[0]||(o[0]=r=>u.value=r),placeholder:"vecchia password"},null,512),[[p,u.value]]),_(e("input",{"onUpdate:modelValue":o[1]||(o[1]=r=>d.value=r),placeholder:"nuova password"},null,512),[[p,d.value]]),e("button",{onClick:o[2]||(o[2]=r=>w(s.value.id))},"Cambia"),k(),x,e("span",S,a(i.value),1)]))}},C={__name:"ProfileView",setup(h){return(c,u)=>(v(),m("div",null,[b($)]))}};export{C as default};
